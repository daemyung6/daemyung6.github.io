<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>사클커터! 배너를 짜르세양!!</title>
    <meta property="og:type" content="website">
    <meta property="og:title" content="사클커터! 배너를 짜르세양!!">
    <meta property="og:description" content="사운드클라우드의 배너를 배경과 프로필이 이어지도록 자릅니다.">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
	<style type="text/css">
		#maincanvas {
			width: 1240px;
			height: 260px;
			border: 1px solid gray;
		}
		#facecanvas {
			border-radius: 50%;
			width: 200px;
			height: 200px;
		}
		body {
			background-color: #F2F2F2;
		}
		#maindiv {
			width: 1240px;
			height: auto;
			margin: auto;
			background-color: white;
		}
		.menunode {
			float: left;
			border-bottom: 1px solid gray;
		}
		.menulast {
			float: right;
			max-width: 100%;
			border-bottom: 1px solid gray;
		}
		#page {
			clear: both;
			height: auto;
			margin: auto;
			background-color: white;
		}
		#firstpage {
			float: left;
			width: 1000px;
			background-color: white;
			padding: 10px;
		}
		#secpage {
			position: relative;
			float: right;
			z-index: 1;
			background-color: white;
		}
		.smallinput {
   			width: 50px;
		}
		#set {
			position: relative;
			top : 0;
			z-index: 1;
		}
		#what {
			position: relative;
			top : 0;
			z-index: 2;
		}
		#saytext {
			margin: 10px;
		}
		#righttext {
			float: right;
		}
		.snsicon {
			width: 50px;
			margin-right: 10px;
		}
		#sayzone {
			margin-top: 10px;
		}
	</style>
</head>
<body>
	<div id="maindiv">
		<canvas id="maincanvas" width="1240" height="260">no canvas available</canvas><br>
		<div id="sayzone">
			<span id="saytext">사클커터! 아래 레이어를 추가하고 배경과 프로필 사진을 저장하세요!</span>
			<span id="righttext">
				<a target="_blank" href="https://www.youtube.com/channel/UCcTfV2gqG3T9GBWLI3A3nrw"><img class="snsicon" src="1.png"></a>
				<a target="_blank" href="https://soundcloud.com/deletable"><img class="snsicon" src="2.png"></a>
				<a target="_blank" href="https://blog.naver.com/daemyung6"><img class="snsicon" src="3.png"></a>
				<a target="_blank" href="https://www.instagram.com/hongdaemyung/"><img class="snsicon" src="4.png"></a>
			</span>
		</div>
		<div id="page">
			<div id="firstpage">
				<div id="set">
					배경 크기 : <input type="text" id="sizex" value="2480" class="smallinput" onchange="doCanvas();">X<input type="text" id="sizey" value="520" class="smallinput" onchange="doCanvas();">, 프로필 크기 : <input type="text" id="facex" value="400" class="smallinput" onchange="doCanvas();">X<input type="text" id="facey" value="400" class="smallinput" onchange="doCanvas();"> │ 컷 위치 : <input type="text" id="cut" value="60" class="smallinput" onchange="doCanvas();"> │ 배경색 : <input type="text" id="backcolor" value="white" class="smallinput" onchange="doCanvas();"> 
					<a href="https://www.google.com/search?sxsrf=ALeKk033la9wvL7TDu8lLTiyuqZTtEXcdg%3A1601015244757&ei=zI1tX_3eLcHW-Qb7oaD4BA&q=hex+color&oq=hex&gs_lcp=CgZwc3ktYWIQAxgAMgoIABCxAxCDARBDMggIABCxAxCDATIICAAQsQMQgwEyBQgAELEDMgUIABCxAzIFCAAQsQMyCAgAELEDEIMBMgcIABCxAxBDMgUIABCxAzIICAAQsQMQgwE6BAgjECc6BAgAEAM6BggjECcQEzoECAAQQzoCCABQ3nJYynRgmIMBaABwAHgAgAGgAYgBsQOSAQMwLjOYAQCgAQGqAQdnd3Mtd2l6wAEB&sclient=psy-ab" target="_blank">HEX 코드</a>
					<br>
					<button onclick="downloadCanvas(this, &#39;maincanvas&#39;, &#39;main.png&#39;);">배경 다운로드</button>
					<button onclick="downloadCanvas(this, &#39;facecanvas&#39;, &#39;face.png&#39;);">프로필 다운로드</button><br>
					<button onclick="addlayer()">레이어 추가</button><br>
					<hr>
				</div>
			</div>
			<div id="secpage">
				<canvas id="facecanvas" width="200" height="200">no canvas available</canvas><br>
				<center>프로필 미리 보기</center>
			</div>
		</div>
	</div>
<script type="text/javascript">
	var maincanvas = document.getElementById('maincanvas');
    var ctx = maincanvas.getContext('2d');

    var facecanvas = document.getElementById('facecanvas');
    var facectx = facecanvas.getContext('2d');
    var faceimg = new Image();

    var layernum = 0;
    var imgfile = new Array();
    var imgcontents = new Array();
    var imgsizeX = new Array();
    var imgsizeY = new Array();
    var imgpositionX = new Array();
    var imgpositionY = new Array();
    var imgratio = new Array();
    var layerinfo = new Array();

    function doCanvas() {
        maincanvas.width = document.getElementById('sizex').value;
        maincanvas.height = document.getElementById('sizey').value;
        ctx.fillStyle = document.getElementById('backcolor').value;
        ctx.fillRect(0, 0, maincanvas.width, maincanvas.height);
        for (var i = 0; i < layerinfo.length; i++) {
            var num = layerinfo[i];
            ctx.drawImage(
                imgcontents[num],
                imgpositionX[num],
                imgpositionY[num],
                imgsizeX[num] * imgratio[num],
                imgsizeY[num] * imgratio[num]
            );
        }
        var cut = document.getElementById('cut').value;
        facecanvas.width = document.getElementById('facex').value;
	    facecanvas.height = document.getElementById('facex').value;

	    faceimg.src = maincanvas.toDataURL();
	    faceimg.onload = function() {
	    	facectx.drawImage(faceimg, -1 * cut, -1 * cut);
	    }
        console.log(layerinfo);
    }
	function fistCanvas() {
	    maincanvas.width = 1240;
	    maincanvas.height = 260;

	    ctx.fillStyle = "gray";
	    ctx.fillRect(0, 0, 1240, 260);

	    ctx.fillStyle = "black";
	    ctx.font = "30px Arial";
		ctx.fillText("Face Zone!",55,140);

	    facecanvas.width = 200;
	    facecanvas.height = 200;

	    faceimg.src = maincanvas.toDataURL();
	    faceimg.onload = function() {
	    	facectx.drawImage(faceimg, -30, -30);
	    }
	}

	function downloadCanvas(link, canvasId, filename) {
		var pom = document.createElement('a');
  		pom.setAttribute('href', document.getElementById(canvasId).toDataURL());
    	pom.setAttribute('download', filename);
    	if (document.createEvent) {
	        var event = document.createEvent('MouseEvents');
	        event.initEvent('click', true, true);
	        pom.dispatchEvent(event);
    	}
	    else {
	        pom.click();
	    }
	}
    function btup(value, value2) {
    	document.getElementById(value).value = document.getElementById(value).value - value2;
    	doCanvas();
    }
    function addlayer() {
        ++layernum;
        if(imgpositionX[layernum] == undefined) {
            imgpositionX[layernum] = 0;
            imgpositionY[layernum] = 0;
            imgratio[layernum] = 1;
        }
        layerinfo.push(layernum);
        newlayer(layernum);
        doCanvas();
    }
    function newlayer(num) {
        var div = document.createElement("div");
        div.id = "layer" + num;
        document.getElementById("set").appendChild(div);

        var input = document.createElement("input");
        input.type = "file";
        input.id = "file" + num;
        input.name = "file" + num;
        document.getElementById("layer" + num).appendChild(input);
        if(imgcontents[num] == undefined)
            imgcontents[num] = new Image;
        imgfile[num] = document.getElementById('file' + num);
        imgfile[num].onchange = function(e) {
            var fileReader = new FileReader();
            fileReader.readAsDataURL(e.target.files[0]);
            fileReader.onload = function(e) {
                imgcontents[num].src = e.target.result;
                imgcontents[num].onload = function() {
                    imgsizeX[num] = imgcontents[num].width;
                    imgsizeY[num] = imgcontents[num].height;
                    doCanvas();
                }
            }
        }
        var br = document.createElement("br");
        document.getElementById("layer" + num).appendChild(br);

        var text = document.createTextNode("X : ");
        document.getElementById("layer" + num).appendChild(text);

        var button = document.createElement("button");
        button.onclick = function() {
            imgpositionX[num] += 10;
            document.getElementById('positionX' + num).value = imgpositionX[num];
            doCanvas();
        }
        var text = document.createTextNode("▲");
        button.appendChild(text);
        document.getElementById("layer" + num).appendChild(button);

        var button = document.createElement("button");
        button.onclick = function() {
            imgpositionX[num] -= 10;
            document.getElementById('positionX' + num).value = imgpositionX[num];
            doCanvas();
        }
        var text = document.createTextNode("▼");
        button.appendChild(text);
        document.getElementById("layer" + num).appendChild(button);

        var input = document.createElement("input");
        input.type = 'text';
        input.id = "positionX" + num;
        input.setAttribute("value", imgpositionX[num]);
        input.setAttribute("class", "smallinput");
        input.onchange = function() {
            imgpositionX[num] = this.value;
            document.getElementById('positionX' + num).value = imgpositionX[num];
            doCanvas();
        }
        document.getElementById("layer" + num).appendChild(input);

        var text = document.createTextNode(", Y : ");
        document.getElementById("layer" + num).appendChild(text);

        var button = document.createElement("button");
        button.onclick = function() {
            imgpositionY[num] += 10;
            document.getElementById('positionY' + num).value = imgpositionY[num];
            doCanvas();
        }
        var text = document.createTextNode("▲");
        button.appendChild(text);
        document.getElementById("layer" + num).appendChild(button);

        var button = document.createElement("button");
        button.onclick = function() {
            imgpositionY[num] -= 10;
            document.getElementById('positionY' + num).value = imgpositionY[num];
            doCanvas();
        }
        var text = document.createTextNode("▼");
        button.appendChild(text);
        document.getElementById("layer" + num).appendChild(button);

        var input = document.createElement("input");
        input.type = 'text';
        input.id = "positionY" + num;
        input.setAttribute("value", imgpositionY[num]);
        input.setAttribute("class", "smallinput");
        input.onchange = function() {
            imgpositionY[num] = this.value;
            document.getElementById('positionY' + num).value = imgpositionY[num];
            doCanvas();
        }
        document.getElementById("layer" + num).appendChild(input);

        var br = document.createElement("br");
        document.getElementById("layer" + num).appendChild(br);

        var text = document.createTextNode("이미지 크기 : ");
        document.getElementById("layer" + num).appendChild(text);

        var button = document.createElement("button");
        button.onclick = function() {
            imgratio[num] += 0.01;
            document.getElementById('imgratio' + num).value = imgratio[num];
            doCanvas();
        }
        var text = document.createTextNode("▲");
        button.appendChild(text);
        document.getElementById("layer" + num).appendChild(button);

        var button = document.createElement("button");
        button.onclick = function() {
            imgratio[num] -= 0.01;
            document.getElementById('imgratio' + num).value = imgratio[num];
            doCanvas();
        }
        var text = document.createTextNode("▼");
        button.appendChild(text);
        document.getElementById("layer" + num).appendChild(button);

        var input = document.createElement("input");
        input.type = 'text';
        input.id = "imgratio" + num;
        input.setAttribute("value", imgratio[num]);
        input.setAttribute("class", "smallinput");
        input.onchange = function() {
            imgratio[num] = this.value;
            document.getElementById('imgratio' + num).value = imgratio[num];
            doCanvas();
        }
        document.getElementById("layer" + num).appendChild(input);

        var button = document.createElement("button");
        button.setAttribute("onclick", "deletelayer(" + num + ")");
        var text = document.createTextNode("삭제");
        button.appendChild(text);
        document.getElementById("layer" + num).appendChild(button);

        var hr = document.createElement("hr");
        document.getElementById("layer" + num).appendChild(hr);
    }
    function deletelayer(layernum) {
        var index = layerinfo.indexOf(layernum);
        layerinfo.splice(index, 1);

        var el = document.getElementById('layer' + layernum);
        el.remove();
        doCanvas();
    }
    addlayer();
    fistCanvas();
</script>
</body></html>